# Sources

[![Travis CI](https://img.shields.io/travis/daily-bruin/sources.svg?style=flat)](https://travis-ci.org/daily-bruin/sources)
[![Codecov](https://img.shields.io/codecov/c/github/daily-bruin/sources.svg)](https://codecov.io/github/daily-bruin/sources)
[![](https://david-dm.org/daily-bruin/sources/status.svg?style=flat)](https://david-dm.org/daily-bruin/sources)
[![](https://david-dm.org/daily-bruin/sources/dev-status.svg?style=flat)](https://david-dm.org/daily-bruin/sources?type=dev)
[![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat)](https://github.com/prettier/prettier)
[![tested with jest](https://img.shields.io/badge/tested_with-jest-99424f.svg?style=flat)](https://github.com/facebook/jest)
[![license](https://img.shields.io/github/license/daily-bruin/sources.svg)]()

A small little website the Daily Bruin uses to keep track of all of our sources.
It's powered by an Express server with a PostgreSQL backend and a GraphQL
endpoint, and uses React on the frontend.

Check out the [design specification](designs/spec.md) for more info!

## Technologies Used

* React
* Sequelize
* Apollo
* Parcel
* Google Oauth 2
* Express
* react-table
* react-contextmenu

## Structure

Sources follows an [MVC](https://en.wikipedia.org/wiki/Model–view–controller)
pattern.

The models are defined through Sequelize and stored in the `models` folder,
along with some general database configuration. Currently there's only one
model, Source.

Controllers are stored in the `controllers` folder. There are 2 controllers,
`authController` and `sourceController` that take care of Google Oauth
authentication and interfacing with the Source model respectively.

Views are stored in the `views` folder.

## Contributing to Sources

### Prerequisites

There are a couple of programs and files Sources depends on that you'll need to
have installed to run it locally.

1. [Yarn](https://yarnpkg.com/lang/en/docs/install/) – Yarn is a JavaScript
   package manager, and an alternative to npm. We prefer it to npm because it
   has a couple of nice features such as caching, lockfiles, and faster
   downloads.
2. [Visual Studio Code](https://code.visualstudio.com) – VS Code is an open
   source text editor built by Microsoft and has amazing tooling support for
   TypeScript projects (as well as a lot of other awesome features!). You can
   use any text editor you want, but VS Code will give you a nice experience :).
3. PostgreSQL – Postgres is the database we use. Installing it locally can be a
   little daunting, so check out our guide below if you're unfamiliar with it!
4. A `.env` file – It's [good practice](https://12factor.net/config) to store
   things like API keys and database information with environment variables so
   that they can easily be changed for different environments without code
   changes. This is cool, but when you have a lot of configuration variables it
   can become hard to manage, so we use a package called
   [dotenv](https://www.npmjs.com/package/dotenv) that reads configuration data
   from a file called `.env` and puts them into `process.env`. Check out our
   guide below for an example `.env`.

#### Installing PostgreSQL

##### Mac

You want to install Postgres through [Homebrew](https://brew.sh).

```shell
brew install postgres
```

Then start Postgres with the command:

```shell
brew services start postgresql
```

Awesome! Now you'll want to create a database. We call ours `sources`.

```shell
createdb sources
```

Note that by default, the Postgres user is your computer's username and there is
no password.

##### Windows

We're working on this! If you know how to install Postgres on Windows, please
make a pull request!

#### Example .env File

If you're making your own, the values you'll want are:

```
DATABASE_HOST=
DATABASE_USER=
DATABASE_PASSWORD=
G_CLIENT_ID=
G_CLIENT_SECRET=
```

### Prerequisites

### Structure

This part is actively being worked on!

```
.
├── Dockerfile
├── LICENSE
├── bin
│   └── www
├── coverage # Generated by Jest for testing coverage
├── designs
│   ├── flowcharts
│   ├── flowcharts.sketch
│   ├── mockups
│   ├── mockups.sketch
│   ├── site-flow.png
│   └── spec.md
├── dist/ # Compiled Typescript code. This is what actually runs on the server.
├── package.json
├── readme.md
├── scripts
│   └── createData.js
├── src
│   ├── app.ts
│   ├── controllers
│   ├── models
│   ├── routes
│   ├── schema
│   └── views
├── tsconfig.json
├── tslint.json
└── yarn.lock # Autogenerated Yarn file.
```

### Technologies

This part is actively being worked on!
